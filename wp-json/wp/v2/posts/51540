{"id":51540,"date":"2009-01-08T20:58:00","date_gmt":"2009-01-08T20:58:00","guid":{"rendered":"\/2009\/01\/08\/open-flash-chart-ii-bar-graphs-with-on-click"},"modified":"2009-08-30T04:35:25","modified_gmt":"2009-08-30T04:35:25","slug":"open-flash-chart-ii-bar-graphs-with-on-click","status":"publish","type":"post","link":"http:\/\/pullmonkey.com\/2009\/01\/08\/open-flash-chart-ii-bar-graphs-with-on-click\/","title":{"rendered":"Open Flash Chart II &#8211; Bar Graphs with on-click"},"content":{"rendered":"<p>Building on <a href=\"http:\/\/teethgrinder.co.uk\/open-flash-chart-2\/line-on-click.php\">line graph clicking<\/a>, thanks to the support of a few other people (mentioned throughout the article) we now have bar graph clicking as well.  The only down side (if you want to call it that) is that it is experimental in the sense that the open flash chart swf object had to be updated, and the update is not part of the official OFC release (at least not at the time of this writing).  No big deal though, just be aware.  It is however part of the <a href=\"http:\/\/github.com\/pullmonkey\/open_flash_chart\/tree\/master\">OFC rails plugin release<\/a>.<br \/>\nBig thanks goes to <a href=\"http:\/\/pullmonkey.com\/2008\/7\/23\/open-flash-chart-ii-plugin-for-ruby-on-rails-ofc2#comment-51524\">Eric<\/a> for his work on the action script for the bar clicking open-flash-chart swf file - see <a href=\"http:\/\/forums.openflashchart.com\/viewtopic.php?f=5&t=305&p=1922#p1922\">this forum entry<\/a> for more details.<br \/>\nObvious thanks also goes to <a href=\"http:\/\/teethgrinder.co.uk\/open-flash-chart-2\/\">monk.e.boy<\/a>.<\/p>\n<p>Ok, so two things to note for this to work:<\/p>\n<ol>\n<li>Pull the latest from github and make sure to get Eric's swf file (under the assets directory - <a href=\"http:\/\/github.com\/pullmonkey\/open_flash_chart\/tree\/master\/assets\/open-flash-chart-bar-clicking.swf\">open-flash-chart-bar-clicking.swf<\/a> ) and place it under RAILS_ROOT\/public<\/li>\n<li>The call to open_flash_chart_object() has changed to accept an optional parameter for the swf file name. I am leaving the original for use as open-flash-chart.swf (which is the default for the swf_file_name param) and added Eric's as open-flash-chart-bar-clicking.swf.  See the example below for usage.<\/li>\n<\/ol>\n<p>\nThe changes that were made can be found <a href=\"http:\/\/github.com\/pullmonkey\/open_flash_chart\/commit\/57776d00e70020b50e6b1a6e2204a5718414b1c0\">here<\/a>.<\/p>\n<p>Here is the graph we are after in this example (click the bars to see what happens):<br \/>\n<script type=\"text\/javascript\" src=\"\/projects\/javascripts\/swfobject.js\"><\/script><\/p>\n<div id=\"flash_content_1219079970.558889\"><\/div>\n<p>    <script type=\"text\/javascript\">\n      swfobject.embedSWF(\"\/projects\/open-flash-chart-bar-clicking.swf\", \"flash_content_1219079970.558889\", \"600\", \"300\", \"9.0.0\", \"expressInstall.swf\",{\"data-file\":\"%2Fprojects%2Fopen_flash_chart2%2Fbar_clicking\"});\n    <\/script><br \/>\n    <noscript><br \/>\n      <object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" codebase=\"http:\/\/fpdownload.macromedia.com\/pub\/shockwave\/cabs\/flash\/swflash.cab#version=8,0,0,0\" width=\"600\" height=\"300\" id=\"flash_content_1219079970.558889\" align=\"middle\"><param name=\"allowScriptAccess\" value=\"sameDomain\" \/><param name=\"movie\" value=\"\/projects\/open-flash-chart-bar-clicking.swf?data=%2Fprojects%2Fopen_flash_chart2%2Fbar_clicking\" \/><param name=\"quality\" value=\"high\" \/><param name=\"bgcolor\" value=\"#FFFFFF\" \/><embed src=\"\/projects\/open-flash-chart-bar-clicking.swf?data=%2Fprojects%2Fopen_flash_chart2%2Fbar_clicking\" quality=\"high\" bgcolor=\"#FFFFFF\" width=\"600\" height=\"300\" name=\"chart_1219079970.558889\" align=\"middle\"  allowScriptAccess=\"sameDomain\" type=\"application\/x-shockwave-flash\" pluginspage=\"http:\/\/www.macromedia.com\/go\/getflashplayer\" id=\"chart_1219079970.558889\" \/><\/object><br \/>\n    <\/noscript><\/p>\n<p><a href=\"http:\/\/pullmonkey.com\/projects\/open_flash_chart2\">More Open Flash Chart II examples.<\/a><\/p>\n<p>And here is the code (the controller):<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\n<\/tt>2<tt>\n<\/tt>3<tt>\n<\/tt>4<tt>\n<\/tt><strong>5<\/strong><tt>\n<\/tt>6<tt>\n<\/tt>7<tt>\n<\/tt>8<tt>\n<\/tt>9<tt>\n<\/tt><strong>10<\/strong><tt>\n<\/tt>11<tt>\n<\/tt>12<tt>\n<\/tt>13<tt>\n<\/tt>14<tt>\n<\/tt><strong>15<\/strong><tt>\n<\/tt>16<tt>\n<\/tt>17<tt>\n<\/tt>18<tt>\n<\/tt>19<tt>\n<\/tt><strong>20<\/strong><tt>\n<\/tt>21<tt>\n<\/tt>22<tt>\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\n<\/tt><span class=\"r\">class<\/span> <span class=\"cl\">TestItController<\/span> &lt; <span class=\"co\">ApplicationController<\/span><tt>\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"fu\">index<\/span><tt>\n<\/tt>    <span class=\"iv\">@graph<\/span> = open_flash_chart_object(<span class=\"i\">600<\/span>,<span class=\"i\">300<\/span>,<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">\/test_it\/graph_code<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"pc\">true<\/span>, <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">\/<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">open-flash-chart-bar-clicking.swf<\/span><span class=\"dl\">&quot;<\/span><\/span>)<tt>\n<\/tt>  <span class=\"r\">end<\/span><tt>\n<\/tt><tt>\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"fu\">graph_code<\/span><tt>\n<\/tt>    title = <span class=\"co\">Title<\/span>.new(<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Bar on-click Example<\/span><span class=\"dl\">&quot;<\/span><\/span>)<tt>\n<\/tt>    bar = <span class=\"co\">BarGlass<\/span>.new<tt>\n<\/tt>    <span class=\"c\"># NOTE ... the next two lines are if you want each bar to have a different response when clicked<\/span><tt>\n<\/tt>    bar_values = (<span class=\"i\">1<\/span>..<span class=\"i\">9<\/span>).to_a.map{|x| bv = <span class=\"co\">BarValue<\/span>.new(x); bv.on_click = <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">alert('hello, my value is <\/span><span class=\"il\"><span class=\"dl\">#{<\/span>x<span class=\"dl\">}<\/span><\/span><span class=\"k\">')<\/span><span class=\"dl\">&quot;<\/span><\/span>; bv}<tt>\n<\/tt>    bar.set_values(bar_values)<tt>\n<\/tt>    <span class=\"c\"># if you want a more generic response across all bars, then the following lines would do:<\/span><tt>\n<\/tt>    <span class=\"c\"># bar.on_click = &quot;alert('hello there')&quot;<\/span><tt>\n<\/tt>    <span class=\"c\"># bar.set_values((1..9).to_a)<\/span><tt>\n<\/tt>    chart = <span class=\"co\">OpenFlashChart<\/span>.new<tt>\n<\/tt>    chart.set_title(title)<tt>\n<\/tt>    chart.add_element(bar)<tt>\n<\/tt>    render <span class=\"sy\">:text<\/span> =&gt; chart.to_s<tt>\n<\/tt>  <span class=\"r\">end<\/span><tt>\n<\/tt><span class=\"r\">end<\/span><tt>\n<\/tt><tt>\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>\nAnd in your view (index.html.erb):<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\n<\/tt>2<tt>\n<\/tt>3<tt>\n<\/tt>4<tt>\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\n<\/tt>&lt;script type=<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">text\/javascript<\/span><span class=\"dl\">&quot;<\/span><\/span> src=<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">\/javascripts\/swfobject.js<\/span><span class=\"dl\">&quot;<\/span><\/span>&gt;&lt;<span class=\"rx\"><span class=\"dl\">\/<\/span><span class=\"k\">script&gt;<tt>\n<\/tt>&lt;%= @graph %&gt;<tt>\n<\/tt><tt>\n<\/tt><\/span><\/span><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Good Luck!<\/p>\n<p><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Building on line graph clicking, thanks to the support of a few other people (mentioned throughout the article) we now have bar graph clicking as well. The only down side (if you want to call it that) is that it is experimental in the sense that the open flash chart swf object had to be [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,3,26,14,5,9,30],"tags":[42,41,52,40,210,211,43],"_links":{"self":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/51540"}],"collection":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/comments?post=51540"}],"version-history":[{"count":3,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/51540\/revisions"}],"predecessor-version":[{"id":57543,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/51540\/revisions\/57543"}],"wp:attachment":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/media?parent=51540"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/categories?post=51540"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/tags?post=51540"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}