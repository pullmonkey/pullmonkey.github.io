{"id":57726,"date":"2012-08-11T01:11:51","date_gmt":"2012-08-11T01:11:51","guid":{"rendered":"http:\/\/pullmonkey.com\/?p=57726"},"modified":"2012-08-16T23:40:41","modified_gmt":"2012-08-16T23:40:41","slug":"dynamic-select-boxes-ruby-on-rails-3","status":"publish","type":"post","link":"http:\/\/pullmonkey.com\/2012\/08\/11\/dynamic-select-boxes-ruby-on-rails-3\/","title":{"rendered":"Dynamic Select Boxes &#8211; Ruby on Rails 3"},"content":{"rendered":"<p>Over 4 years ago, I wrote <a href=\"http:\/\/pullmonkey.com\/2008\/03\/30\/dynamic-select-boxes-ruby-on-rails\/\">a tutorial for doing dynamic (cascading) select boxes<\/a>.<br \/>\nStill getting comments and emails to this day.  Mostly asking how to get this working with rails 3, which has moved from prototype to jquery.<br \/>\nSo here's a tutorial for getting 3 select boxes to trigger updates for each other.<\/p>\n<p>First set things up:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319671.js?file=gistfile1.sh\"><\/script><\/p>\n<p>I just used the html5 haml twitter bootstrap, etc template.  Really useful.<\/p>\n<p>If you need data, here's what I used - put this in your db\/seeds.rb file:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319679.js?file=gistfile1.rb\"><\/script><\/p>\n<p>Next, setup your model associations:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319683.js?file=gistfile1.rb\"><\/script><\/p>\n<p>Genres have many artists.<br \/>\nArtists have many songs.<br \/>\nGenres have many songs through artists.<\/p>\n<p>I'm just using a home controller to setup variables for the index page as well as setup variables for use in the dynamic updating:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319690.js?file=gistfile1.rb\"><\/script><\/p>\n<p>Now the view just has the 3 select boxes and the unobtrusive javascript (triggered onchange) to make the ajax calls for updating:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319691.js?file=gistfile1.rb\"><\/script><\/p>\n<p>We need our rjs files for updating the select boxes, one for the songs (when artist changes) and one for the artists and songs (when genre changes):<br \/>\n<script src=\"https:\/\/gist.github.com\/3319706.js?file=gistfile1.rb\"><\/script><\/p>\n<p>Our routes are simple:<br \/>\n<script src=\"https:\/\/gist.github.com\/3319709.js?file=gistfile1.rb\"><\/script><\/p>\n<p>That's it.  <\/p>\n<p><strong>UPDATE:<\/strong>  Here's an erb alternative for index.html.<br \/>\n<script src=\"https:\/\/gist.github.com\/3366572.js?file=gistfile1.rhtml\"><\/script><\/p>\n<p>And the js.haml can be converted to js.erb by taking #{...} and converting to <%= ... %> :<br \/>\n<script src=\"https:\/\/gist.github.com\/3374533.js?file=gistfile1.rhtml\"><\/script><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Over 4 years ago, I wrote a tutorial for doing dynamic (cascading) select boxes. Still getting comments and emails to this day. Mostly asking how to get this working with rails 3, which has moved from prototype to jquery. So here&#8217;s a tutorial for getting 3 select boxes to trigger updates for each other. First [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,31,5,9,30],"tags":[205,56,204,206,210,207,57,208],"_links":{"self":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/57726"}],"collection":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/comments?post=57726"}],"version-history":[{"count":7,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/57726\/revisions"}],"predecessor-version":[{"id":57730,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/57726\/revisions\/57730"}],"wp:attachment":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/media?parent=57726"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/categories?post=57726"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/tags?post=57726"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}