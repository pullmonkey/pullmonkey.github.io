{"id":36087,"date":"2008-03-30T18:52:00","date_gmt":"2008-03-30T18:52:00","guid":{"rendered":"\/2008\/03\/31\/dynamic-select-boxes-ruby-on-rails"},"modified":"2012-08-11T01:20:44","modified_gmt":"2012-08-11T01:20:44","slug":"dynamic-select-boxes-ruby-on-rails","status":"publish","type":"post","link":"http:\/\/pullmonkey.com\/2008\/03\/30\/dynamic-select-boxes-ruby-on-rails\/","title":{"rendered":"Dynamic Select Boxes &#8211; Ruby on Rails"},"content":{"rendered":"<p><strong>UPDATE: There is <a href=\"http:\/\/pullmonkey.com\/2012\/08\/11\/dynamic-select-boxes-ruby-on-rails-3\/\">a dynamic select boxes for rails 3 tutorial<\/a> now, so if this isn't working for you, check it out.<br \/>\n<\/strong><br \/>\nI have seen this asked a lot in the forums, so I thought I would write up a little tutorial.<br \/>\nFor this tutorial I am going to have three select boxes.  The first select box will be a super category of the next two select boxes and the second select box will be a super category of the third select box.  I hope that makes sense.  To demonstrate, I thought I would use Genre -> Artist -> Song.  So let's get started:<br \/>\nCreate your models and build your migrations:<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>ruby script\/generate model genre name<span class=\"sy\">:string<\/span><tt>\r\n<\/tt>ruby script\/generate model artist name<span class=\"sy\">:string<\/span> genre_id<span class=\"sy\">:integer<\/span><tt>\r\n<\/tt>ruby script\/generate model song title<span class=\"sy\">:string<\/span> artist_id<span class=\"sy\">:integer<\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Populate your genres, artists and songs through a migration:<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>ruby script\/generate migration create_hierarchy<tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Contents of migration:<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt>7<tt>\r\n<\/tt>8<tt>\r\n<\/tt>9<tt>\r\n<\/tt><strong>10<\/strong><tt>\r\n<\/tt>11<tt>\r\n<\/tt>12<tt>\r\n<\/tt>13<tt>\r\n<\/tt>14<tt>\r\n<\/tt><strong>15<\/strong><tt>\r\n<\/tt>16<tt>\r\n<\/tt>17<tt>\r\n<\/tt>18<tt>\r\n<\/tt>19<tt>\r\n<\/tt><strong>20<\/strong><tt>\r\n<\/tt>21<tt>\r\n<\/tt>22<tt>\r\n<\/tt>23<tt>\r\n<\/tt>24<tt>\r\n<\/tt><strong>25<\/strong><tt>\r\n<\/tt>26<tt>\r\n<\/tt>27<tt>\r\n<\/tt>28<tt>\r\n<\/tt>29<tt>\r\n<\/tt><strong>30<\/strong><tt>\r\n<\/tt>31<tt>\r\n<\/tt>32<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt><span class=\"r\">class<\/span> <span class=\"cl\">CreateHierarchy<\/span> &lt; <span class=\"co\">ActiveRecord<\/span>::<span class=\"co\">Migration<\/span><tt>\r\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"pc\">self<\/span>.up<tt>\r\n<\/tt>    g1 = <span class=\"co\">Genre<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Genre 1<\/span><span class=\"dl\">&quot;<\/span><\/span>)<tt>\r\n<\/tt>    g2 = <span class=\"co\">Genre<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Genre 2<\/span><span class=\"dl\">&quot;<\/span><\/span>)<tt>\r\n<\/tt>    g3 = <span class=\"co\">Genre<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Genre 3<\/span><span class=\"dl\">&quot;<\/span><\/span>)<tt>\r\n<\/tt><tt>\r\n<\/tt>    a1 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 1<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g1.id)<tt>\r\n<\/tt>    a2 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 2<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g1.id)<tt>\r\n<\/tt>    a3 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 3<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g2.id)<tt>\r\n<\/tt>    a4 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 4<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g2.id)<tt>\r\n<\/tt>    a5 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 5<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g3.id)<tt>\r\n<\/tt>    a6 = <span class=\"co\">Artist<\/span>.create(<span class=\"sy\">:name<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Artist 6<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:genre_id<\/span> =&gt; g3.id)<tt>\r\n<\/tt><tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 1<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a1.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 2<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a1.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 3<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a2.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 4<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a2.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 5<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a3.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 6<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a3.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 7<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a4.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 8<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a4.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 9<\/span><span class=\"dl\">&quot;<\/span><\/span>,  <span class=\"sy\">:artist_id<\/span> =&gt; a5.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 10<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:artist_id<\/span> =&gt; a5.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 11<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:artist_id<\/span> =&gt; a6.id)<tt>\r\n<\/tt>    <span class=\"co\">Song<\/span>.create(<span class=\"sy\">:title<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Song 12<\/span><span class=\"dl\">&quot;<\/span><\/span>, <span class=\"sy\">:artist_id<\/span> =&gt; a6.id)<tt>\r\n<\/tt>  <span class=\"r\">end<\/span><tt>\r\n<\/tt><tt>\r\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"pc\">self<\/span>.down<tt>\r\n<\/tt><span class=\"c\"># you can fill this in if you want.<\/span><tt>\r\n<\/tt>  <span class=\"r\">end<\/span><tt>\r\n<\/tt><span class=\"r\">end<\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Yes, I know it is generic data, sorry.  So anyway, as you can see there are 3 genres, each with 2 artists, for a total of 6 artists each with 2 songs for a total of 12 songs.  Each genre has 4 songs through its artists.  Ok, so now we need to populate the database:<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>rake db<span class=\"sy\">:migrate<\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Now we need to modify our models to set up the associations.<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt>7<tt>\r\n<\/tt>8<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt><span class=\"r\">class<\/span> <span class=\"cl\">Genre<\/span> &lt; <span class=\"co\">ActiveRecord<\/span>::<span class=\"co\">Base<\/span><tt>\r\n<\/tt>  has_many <span class=\"sy\">:artists<\/span><tt>\r\n<\/tt>  has_many <span class=\"sy\">:songs<\/span>, <span class=\"sy\">:through<\/span> =&gt; <span class=\"sy\">:artists<\/span><tt>\r\n<\/tt><span class=\"r\">end<\/span><tt>\r\n<\/tt><span class=\"r\">class<\/span> <span class=\"cl\">Artist<\/span> &lt; <span class=\"co\">ActiveRecord<\/span>::<span class=\"co\">Base<\/span><tt>\r\n<\/tt>  has_many <span class=\"sy\">:songs<\/span><tt>\r\n<\/tt><span class=\"r\">end<\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>That should be it, now let's go to the console and see that all this works:<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt>7<tt>\r\n<\/tt>8<tt>\r\n<\/tt>9<tt>\r\n<\/tt><strong>10<\/strong><tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>ruby script\/console <tt>\r\n<\/tt><span class=\"co\">Loading<\/span> development environment (<span class=\"co\">Rails<\/span> <span class=\"fl\">2.0<\/span>.<span class=\"i\">2<\/span>)<tt>\r\n<\/tt>&gt;&gt; g = <span class=\"co\">Genre<\/span>.find(<span class=\"sy\">:first<\/span>)<tt>\r\n<\/tt>=&gt; <span class=\"c\">#&lt;Genre id: 1, name: &quot;Genre 1&quot;, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;<\/span><tt>\r\n<\/tt>&gt;&gt; g.artists<tt>\r\n<\/tt>=&gt; [<span class=\"c\">#&lt;Artist id: 1, name: &quot;Artist 1&quot;, genre_id: 1, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;, #&lt;Artist id: 2, name: &quot;Artist 2&quot;, genre_id: 1, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;]<\/span><tt>\r\n<\/tt>&gt;&gt; g.songs<tt>\r\n<\/tt>=&gt; [<span class=\"c\">#&lt;Song id: 1, title: &quot;Song 1&quot;, artist_id: 1, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;, #&lt;Song id: 2, title: &quot;Song 2&quot;, artist_id: 1, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;, #&lt;Song id: 3, title: &quot;Song 3&quot;, artist_id: 2, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;, #&lt;Song id: 4, title: &quot;Song 4&quot;, artist_id: 2, created_at: &quot;2008-03-30 11:52:25&quot;, updated_at: &quot;2008-03-30 11:52:25&quot;&gt;]<\/span><tt>\r\n<\/tt>&gt;&gt; <tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Looks like it works \ud83d\ude42  Ok, now on to the controller.  Our controller needs to have some action for the view, I just used index, and two other actions, for remote function calls, I called these update_artists and update_songs.  update_artists() is called when a genre is changed and it updates the list of artists and the list of songs based on the genre.  update_songs() only updates the songs based on the artist.  So let's look at this code:<br \/>\n# the controller<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt>7<tt>\r\n<\/tt>8<tt>\r\n<\/tt>9<tt>\r\n<\/tt><strong>10<\/strong><tt>\r\n<\/tt>11<tt>\r\n<\/tt>12<tt>\r\n<\/tt>13<tt>\r\n<\/tt>14<tt>\r\n<\/tt><strong>15<\/strong><tt>\r\n<\/tt>16<tt>\r\n<\/tt>17<tt>\r\n<\/tt>18<tt>\r\n<\/tt>19<tt>\r\n<\/tt><strong>20<\/strong><tt>\r\n<\/tt>21<tt>\r\n<\/tt>22<tt>\r\n<\/tt>23<tt>\r\n<\/tt>24<tt>\r\n<\/tt><strong>25<\/strong><tt>\r\n<\/tt>26<tt>\r\n<\/tt>27<tt>\r\n<\/tt>28<tt>\r\n<\/tt>29<tt>\r\n<\/tt><strong>30<\/strong><tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt><span class=\"r\">class<\/span> <span class=\"cl\">TestItController<\/span> &lt; <span class=\"co\">ApplicationController<\/span><tt>\r\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"fu\">index<\/span><tt>\r\n<\/tt>    <span class=\"iv\">@genres<\/span>  = <span class=\"co\">Genre<\/span>.find(<span class=\"sy\">:all<\/span>)<tt>\r\n<\/tt>    <span class=\"iv\">@artists<\/span> = <span class=\"co\">Artist<\/span>.find(<span class=\"sy\">:all<\/span>)<tt>\r\n<\/tt>    <span class=\"iv\">@songs<\/span>   = <span class=\"co\">Song<\/span>.find(<span class=\"sy\">:all<\/span>)<tt>\r\n<\/tt>  <span class=\"r\">end<\/span><tt>\r\n<\/tt><tt>\r\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"fu\">update_artists<\/span><tt>\r\n<\/tt>    <span class=\"c\"># updates artists and songs based on genre selected<\/span><tt>\r\n<\/tt>    genre = <span class=\"co\">Genre<\/span>.find(params[<span class=\"sy\">:genre_id<\/span>])<tt>\r\n<\/tt>    artists = genre.artists<tt>\r\n<\/tt>    songs   = genre.songs<tt>\r\n<\/tt><tt>\r\n<\/tt>    render <span class=\"sy\">:update<\/span> <span class=\"r\">do<\/span> |page|<tt>\r\n<\/tt>      page.replace_html <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">artists<\/span><span class=\"dl\">'<\/span><\/span>, <span class=\"sy\">:partial<\/span> =&gt; <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">artists<\/span><span class=\"dl\">'<\/span><\/span>, <span class=\"sy\">:object<\/span> =&gt; artists<tt>\r\n<\/tt>      page.replace_html <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">songs<\/span><span class=\"dl\">'<\/span><\/span>,   <span class=\"sy\">:partial<\/span> =&gt; <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">songs<\/span><span class=\"dl\">'<\/span><\/span>,   <span class=\"sy\">:object<\/span> =&gt; songs<tt>\r\n<\/tt>    <span class=\"r\">end<\/span><tt>\r\n<\/tt>  <span class=\"r\">end<\/span><tt>\r\n<\/tt><tt>\r\n<\/tt>  <span class=\"r\">def<\/span> <span class=\"fu\">update_songs<\/span><tt>\r\n<\/tt>    <span class=\"c\"># updates songs based on artist selected<\/span><tt>\r\n<\/tt>    artist = <span class=\"co\">Artist<\/span>.find(params[<span class=\"sy\">:artist_id<\/span>])<tt>\r\n<\/tt>    songs  = artist.songs<tt>\r\n<\/tt><tt>\r\n<\/tt>    render <span class=\"sy\">:update<\/span> <span class=\"r\">do<\/span> |page|<tt>\r\n<\/tt>      page.replace_html <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">songs<\/span><span class=\"dl\">'<\/span><\/span>, <span class=\"sy\">:partial<\/span> =&gt; <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">songs<\/span><span class=\"dl\">'<\/span><\/span>, <span class=\"sy\">:object<\/span> =&gt; songs<tt>\r\n<\/tt>    <span class=\"r\">end<\/span><tt>\r\n<\/tt>  <span class=\"r\">end<\/span><tt>\r\n<\/tt><span class=\"r\">end<\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Now as far as views go we have one view (index.html.erb) and two partials (_songs and _artists).  Let's take a look at those:<br \/>\n# the _songs partial (_songs.html.erb):<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>&lt;%= collection_select(<span class=\"pc\">nil<\/span>, <span class=\"sy\">:song_id<\/span>, songs, <span class=\"sy\">:id<\/span>, <span class=\"sy\">:title<\/span>,<tt>\r\n<\/tt>                     {<span class=\"sy\">:prompt<\/span>   =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Select a Song<\/span><span class=\"dl\">&quot;<\/span><\/span>}) <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\"><tt>\r\n<\/tt><\/span><\/span><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p># the _artists partial (_artists.html.erb):<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>&lt;%= collection_select(<span class=\"pc\">nil<\/span>, <span class=\"sy\">:artist_id<\/span>, artists, <span class=\"sy\">:id<\/span>, <span class=\"sy\">:name<\/span>,<tt>\r\n<\/tt>                     {<span class=\"sy\">:prompt<\/span>   =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Select an Artist<\/span><span class=\"dl\">&quot;<\/span><\/span>},<tt>\r\n<\/tt>                     {<span class=\"sy\">:onchange<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"il\"><span class=\"dl\">#{<\/span>remote_function(<span class=\"sy\">:url<\/span>  =&gt; {<span class=\"sy\">:action<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">update_songs<\/span><span class=\"dl\">&quot;<\/span><\/span>},<tt>\r\n<\/tt>                                                      <span class=\"sy\">:with<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">'artist_id='+value<\/span><span class=\"dl\">&quot;<\/span><\/span>)<span class=\"dl\">}<\/span><\/span><span class=\"dl\">&quot;<\/span><\/span>}) <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\"><tt>\r\n<\/tt>&lt;br\/<\/span><span class=\"dl\">&gt;<\/span><\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p># and last, but not least, the index view (index.html.erb):<\/p>\n<table class=\"CodeRay\">\n<tr>\n<td class=\"line_numbers\" title=\"click to toggle\" onclick=\"with (this.firstChild.style) { display = (display == '') ? 'none' : '' }\">\n<pre>1<tt>\r\n<\/tt>2<tt>\r\n<\/tt>3<tt>\r\n<\/tt>4<tt>\r\n<\/tt><strong>5<\/strong><tt>\r\n<\/tt>6<tt>\r\n<\/tt>7<tt>\r\n<\/tt>8<tt>\r\n<\/tt>9<tt>\r\n<\/tt><\/pre>\n<\/td>\n<td class=\"code\">\n<pre ondblclick=\"with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }\"><tt>\r\n<\/tt>&lt;%= javascript_include_tag <span class=\"sy\">:defaults<\/span> <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\"><tt>\r\n<\/tt>&lt;%= collection_select(nil, :genre_id,  @genres,  :id, :name,<tt>\r\n<\/tt>                      {:prompt   =<\/span><span class=\"dl\">&gt;<\/span><\/span> <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">Select a Genre<\/span><span class=\"dl\">&quot;<\/span><\/span>},<tt>\r\n<\/tt>                      {<span class=\"sy\">:onchange<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"il\"><span class=\"dl\">#{<\/span>remote_function(<span class=\"sy\">:url<\/span>  =&gt; {<span class=\"sy\">:action<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">update_artists<\/span><span class=\"dl\">&quot;<\/span><\/span>},<tt>\r\n<\/tt>                                                       <span class=\"sy\">:with<\/span> =&gt; <span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">'genre_id='+value<\/span><span class=\"dl\">&quot;<\/span><\/span>)<span class=\"dl\">}<\/span><\/span><span class=\"dl\">&quot;<\/span><\/span>}) <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\"><tt>\r\n<\/tt>&lt;br\/<\/span><span class=\"dl\">&gt;<\/span><\/span><tt>\r\n<\/tt>&lt;div id=<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">artists<\/span><span class=\"dl\">&quot;<\/span><\/span>&gt;&lt;%= render <span class=\"sy\">:partial<\/span> =&gt; <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">artists<\/span><span class=\"dl\">'<\/span><\/span>, <span class=\"sy\">:object<\/span> =&gt; <span class=\"iv\">@artists<\/span> <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\">&lt;\/div<\/span><span class=\"dl\">&gt;<\/span><\/span><tt>\r\n<\/tt>&lt;div id=<span class=\"s\"><span class=\"dl\">&quot;<\/span><span class=\"k\">songs<\/span><span class=\"dl\">&quot;<\/span><\/span>&gt;&lt;%= render <span class=\"sy\">:partial<\/span> =&gt; <span class=\"s\"><span class=\"dl\">'<\/span><span class=\"k\">songs<\/span><span class=\"dl\">'<\/span><\/span>,   <span class=\"sy\">:object<\/span> =&gt; <span class=\"iv\">@songs<\/span> <span class=\"s\"><span class=\"dl\">%&gt;<\/span><span class=\"k\">&lt;\/div<\/span><span class=\"dl\">&gt;<\/span><\/span><tt>\r\n<\/tt><\/pre>\n<\/td>\n<\/tr>\n<\/table>\n<p>Ok, this probably takes some explanation.  I will save that for part II, where I will also improve upon what we have so far and include a demo.<\/p>\n<p>For now, if you have any questions, just ask me in the comments.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>UPDATE: There is a dynamic select boxes for rails 3 tutorial now, so if this isn&#8217;t working for you, check it out. I have seen this asked a lot in the forums, so I thought I would write up a little tutorial. For this tutorial I am going to have three select boxes. The first [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[6,3,5,30],"tags":[204,210],"_links":{"self":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/36087"}],"collection":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/comments?post=36087"}],"version-history":[{"count":2,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/36087\/revisions"}],"predecessor-version":[{"id":57732,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/posts\/36087\/revisions\/57732"}],"wp:attachment":[{"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/media?parent=36087"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/categories?post=36087"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/pullmonkey.com\/wp-json\/wp\/v2\/tags?post=36087"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}